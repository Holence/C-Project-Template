include scripts/setting.mk

# Include variables generated by menuconfig
-include include/config/auto.conf

# Include all filelist.mk to merge file lists
FILELIST_MK = $(shell find . -name "filelist.mk")
include $(FILELIST_MK)

# ./src/**/filelist.mk will select SRCS using SRCS-y
SRCS := $(SRCS-y)

# ./third-party/filelist.mk will select LIBS using LIBS-y
LIBS := $(LIBS-y)

# use LDFLAGS to link LIBS
LDFLAGS += -L.
LDFLAGS += $(addprefix -l:, $(LIBS))

include scripts/kconfig-build.mk

# the executable target depends on all LIBS
$(TARGET_EXEC): $(LIBS)
